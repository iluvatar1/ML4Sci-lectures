name: Binder
on:
  push:
    branches:
      - master
    paths:
      - 'requirements.txt'
      - 'environment.yml'
      - 'Dockerfile'
      - '.github/workflows/mybinder.yml'

jobs:
  cache-binder-image:
    runs-on: ubuntu-latest
    steps:
      - name: Warm Binder cache
        run: |
          curl -L https://mybinder.org/build/gh/iluvatar1/ML4Sci-lectures/master
        #uses: jupyterhub/repo2docker-action@master
        #with:
        #  NO_PUSH: true
        #  MYBINDERORG_TAG: master # ${{ github.ref_name }}


# name: Binder
# on: [push]

# jobs:
#   Create-MyBinderOrg-Cache:
#     runs-on: ubuntu-latest
#     steps:
#     - name: cache binder build on mybinder.org
#       uses: jupyterhub/repo2docker-action@master
#       with:
#         NO_PUSH: true
#         MYBINDERORG_TAG: ${{ github.event.ref }} # This builds the container on mybinder.org with the branch that was pushed on.
